[36c459e0a] {jit-log-opt-loop
loop with 239 ops
[p0]
i1 = getfield_gc(p0, descr=<FieldS spyvm.shadow.ContextPartShadow.inst__pc 24>)
i2 = getfield_gc(p0, descr=<FieldU spyvm.shadow.ContextPartShadow.inst__stack_ptr 32>)
p3 = getfield_gc(p0, descr=<FieldP spyvm.shadow.ContextPartShadow.inst__s_sender 28>)
p4 = getfield_gc(p0, descr=<FieldP spyvm.shadow.ContextPartShadow.inst__temps_and_stack 36>)
p6 = getarrayitem_gc(p4, 0, descr=<ArrayP 4>)
p8 = getarrayitem_gc(p4, 1, descr=<ArrayP 4>)
p10 = getarrayitem_gc(p4, 2, descr=<ArrayP 4>)
p12 = getarrayitem_gc(p4, 3, descr=<ArrayP 4>)
p14 = getarrayitem_gc(p4, 4, descr=<ArrayP 4>)
p16 = getarrayitem_gc(p4, 5, descr=<ArrayP 4>)
p18 = getarrayitem_gc(p4, 6, descr=<ArrayP 4>)
p20 = getarrayitem_gc(p4, 7, descr=<ArrayP 4>)
p22 = getarrayitem_gc(p4, 8, descr=<ArrayP 4>)
p24 = getarrayitem_gc(p4, 9, descr=<ArrayP 4>)
p26 = getarrayitem_gc(p4, 10, descr=<ArrayP 4>)
p28 = getarrayitem_gc(p4, 11, descr=<ArrayP 4>)
p30 = getarrayitem_gc(p4, 12, descr=<ArrayP 4>)
p32 = getarrayitem_gc(p4, 13, descr=<ArrayP 4>)







label(p0, i1, i2, p3, p6, p8, p10, p12, p14, p16, p18, p20, p22, p24, p26, p28, p30, p32, descr=TargetToken(59532240))
guard_value(i1, 12, descr=<Guard0x38b2a90>) [p0, i1, i2, p3, p6, p8, p10, p12, p14, p16, p18, p20, p22, p24, p26, p28, p30, p32]
guard_class(p0, ConstClass(BlockContextShadow), descr=<Guard0x38b2310>) [p0, i2, p3, p6, p8, p10, p12, p14, p16, p18, p20, p22, p24, p26, p28, p30, p32]
p35 = getfield_gc(p0, descr=<FieldP spyvm.shadow.BlockContextShadow.inst__w_home 52>)
i36 = getfield_gc(p0, descr=<FieldU spyvm.shadow.AbstractShadow.inst_space 12>)
p37 = getfield_gc(p35, descr=<FieldP spyvm.model.W_AbstractPointersObject.inst_shadow 20>)
guard_nonnull_class(p37, ConstClass(MethodContextShadow), descr=<Guard0x38b2410>) [p0, i36, p35, p37, i2, p3, p6, p8, p10, p12, p14, p16, p18, p20, p22, p24, p26, p28, p30, p32]
p39 = getfield_gc(p37, descr=<FieldP spyvm.shadow.MethodContextShadow.inst__w_method 44>)
guard_value(p39, ConstPtr(ptr40), descr=<Guard0x38b2a50>) [p0, p39, i2, p3, p6, p8, p10, p12, p14, p16, p18, p20, p22, p24, p26, p28, p30, p32]
guard_not_invalidated(descr=<Guard0x38b2a10>) [p0, i36, i2, p3, p6, p8, p10, p12, p14, p16, p18, p20, p22, p24, p26, p28, p30, p32]
i41 = ptr_eq(p37, p0)
guard_false(i41, descr=<Guard0x38b29d0>) [p0, i36, p35, p37, i2, p3, p6, p8, p10, p12, p14, p16, p18, p20, p22, p24, p26, p28, p30, p32]
p42 = getfield_gc(p37, descr=<FieldP spyvm.shadow.ContextPartShadow.vable_token 20>)
i44 = ptr_ne(p42, ConstPtr(null))
cond_call(i44, 17954464, p37, descr=<Callv 0 r EF=2 OS=121>)
p46 = getfield_gc(p37, descr=<FieldP spyvm.shadow.ContextPartShadow.inst__temps_and_stack 36>)
p48 = getarrayitem_gc(p46, 1, descr=<ArrayP 4>)
guard_value(i2, 0, descr=<Guard0x38b2990>) [p0, i2, p48, p3, p6, p8, p10, p12, p14, p16, p18, p20, p22, p24, p26, p28, p30, p32]
guard_nonnull_class(p48, ConstClass(W_SmallInteger), descr=<Guard0x38b2450>) [p0, p48, p3, p10, p12, p14, p16, p18, p20, p22, p24, p26, p28, p30, p32]
i51 = getfield_gc_pure(p48, descr=<FieldS spyvm.model.W_SmallInteger.inst_value 8>)
i53 = int_le(i51, 1000000)
guard_true(i53, descr=<Guard0x38b2950>) [p0, p3, p48, p10, p12, p14, p16, p18, p20, p22, p24, p26, p28, p30, p32]
cond_call(i44, 17954464, p37, descr=<Callv 0 r EF=2 OS=121>)
p56 = getarrayitem_gc(p46, 0, descr=<ArrayP 4>)
cond_call(i44, 17954464, p37, descr=<Callv 0 r EF=2 OS=121>)
guard_class(p56, 19307816, descr=<Guard0x38b2390>) [p0, i36, p56, p3, p48, p10, p12, p14, p16, p18, p20, p22, p24, p26, p28, p30, p32]
p59 = getfield_gc(p56, descr=<FieldP spyvm.model.W_AbstractObjectWithClassReference.inst_s_class 12>)
guard_value(p59, ConstPtr(ptr60), descr=<Guard0x38b2910>) [p0, p56, p59, p3, p48, p10, p12, p14, p16, p18, p20, p22, p24, p26, p28, p30, p32]
i62 = getfield_gc(ConstPtr(ptr61), descr=<FieldU spyvm.interpreter.Interpreter.inst_trace 46>)
guard_false(i62, descr=<Guard0x38b28d0>) [p0, p3, p10, p12, p14, p16, p18, p20, p22, p24, p26, p28, p30, p32, p48, p56, i36]
i63 = getfield_gc(ConstPtr(ptr61), descr=<FieldU spyvm.interpreter.Interpreter.inst__loop 44>)
guard_true(i63, descr=<Guard0x38b2890>) [p0, p3, p10, p12, p14, p16, p18, p20, p22, p24, p26, p28, p30, p32, p48, p56, i36]
i64 = getfield_gc(ConstPtr(ptr61), descr=<FieldS spyvm.interpreter.Interpreter.inst_remaining_stack_depth 40>)
i66 = int_le(i64, 1)
guard_false(i66, descr=<Guard0x38b2850>) [p0, p3, p10, p12, p14, p16, p18, p20, p22, p24, p26, p28, p30, p32, p48, p56, i36]
i68 = int_sub(i64, 1)
setfield_gc(ConstPtr(ptr61), i68, descr=<FieldS spyvm.interpreter.Interpreter.inst_remaining_stack_depth 40>)
i70 = int_le(i68, 1)
guard_false(i70, descr=<Guard0x38b2810>) [p0, p3, p10, p12, p14, p16, p18, p20, p22, p24, p26, p28, p30, p32, p48, p56, i36]
i72 = int_sub(i68, 1)
p73 = getfield_gc(p56, descr=<FieldP spyvm.model.W_AbstractPointersObject.inst_shadow 20>)
setfield_gc(ConstPtr(ptr61), i72, descr=<FieldS spyvm.interpreter.Interpreter.inst_remaining_stack_depth 40>)
guard_isnull(p73, descr=<Guard0x38b27d0>) [p0, i36, p73, p56, p3, p10, p12, p14, p16, p18, p20, p22, p24, p26, p28, p30, p32, p48, None, None]
p75 = getfield_gc(p56, descr=<FieldP spyvm.model.W_PointersObject.inst_strategy 32>)
guard_class(p75, 19309044, descr=<Guard0x38b2350>) [p0, i36, p75, p56, p3, p10, p12, p14, p16, p18, p20, p22, p24, p26, p28, p30, p32, p48, None, None]
p77 = getfield_gc(p56, descr=<FieldP spyvm.model.W_PointersObject.inst__storage 28>)
p79 = getarrayitem_gc(p77, 2, descr=<ArrayP 4>)
p80 = getfield_gc_pure(p75, descr=<FieldP spyvm.fieldtypes.FixedSizeFieldTypes.inst_types 20>)
p81 = getarrayitem_gc_pure(p80, 2, descr=<ArrayP 4>)
i83 = instance_ptr_eq(p81, ConstPtr(ptr82))
guard_true(i83, descr=<Guard0x38b2790>) [p0, p80, p79, p3, p10, p12, p14, p16, p18, p20, p22, p24, p26, p28, p30, p32, p48, p56, i36]
p85 = getarrayitem_gc(p77, 0, descr=<ArrayP 4>)
p86 = getarrayitem_gc_pure(p80, 0, descr=<ArrayP 4>)
i88 = instance_ptr_eq(p86, ConstPtr(ptr87))
guard_false(i88, descr=<Guard0x38b2750>) [p0, p80, p85, p3, p10, p12, p14, p16, p18, p20, p22, p24, p26, p28, p30, p32, p79, p48, p56, i36]
i90 = instance_ptr_eq(p86, ConstPtr(ptr89))
guard_false(i90, descr=<Guard0x38b2710>) [p0, p80, p85, p3, p10, p12, p14, p16, p18, p20, p22, p24, p26, p28, p30, p32, p79, p48, p56, i36]
i92 = instance_ptr_eq(p86, ConstPtr(ptr91))
guard_false(i92, descr=<Guard0x38b26d0>) [p0, p85, p3, p10, p12, p14, p16, p18, p20, p22, p24, p26, p28, p30, p32, p79, p48, p56, i36]
guard_class(p85, 19307816, descr=<Guard0x38b23d0>) [p0, i36, p85, p3, p10, p12, p14, p16, p18, p20, p22, p24, p26, p28, p30, p32, p79, p48, p56, None]
p94 = getfield_gc(p85, descr=<FieldP spyvm.model.W_AbstractObjectWithClassReference.inst_s_class 12>)
guard_value(p94, ConstPtr(ptr95), descr=<Guard0x38b2690>) [p0, p85, p94, p3, p10, p12, p14, p16, p18, p20, p22, p24, p26, p28, p30, p32, p79, p48, p56, i36]
p96 = getfield_gc(p85, descr=<FieldP spyvm.model.W_AbstractPointersObject.inst_shadow 20>)
guard_isnull(p96, descr=<Guard0x38b2650>) [p0, p85, p96, p3, p10, p12, p14, p16, p18, p20, p22, p24, p26, p28, p30, p32, p79, p48, p56, i36]
p97 = getfield_gc(p85, descr=<FieldP spyvm.model.W_PointersObject.inst_strategy 32>)
guard_class(p97, 19328376, descr=<Guard0x38b2490>) [p0, p85, p97, p3, p10, p12, p14, p16, p18, p20, p22, p24, p26, p28, p30, p32, p79, p48, p56, i36]
p99 = getfield_gc(p85, descr=<FieldP spyvm.model.W_PointersObject.inst__storage 28>)
p100 = getfield_gc_pure(p99, descr=<FieldP spyvm.fieldtypes.DenseSmallIntegerStorage.inst_arr 16>)
i101 = arraylen_gc(p100, descr=<ArrayS 4>)
i102 = getfield_gc_pure(p79, descr=<FieldS spyvm.model.W_SmallInteger.inst_value 8>)
i103 = int_eq(i102, i101)
guard_false(i103, descr=<Guard0x38b2610>) [p0, p3, p10, p12, p14, p16, p18, p20, p22, p24, p26, p28, p30, p32, i101, p79, p48, p56, i36]
i105 = int_add_ovf(i102, 1)
guard_no_overflow(descr=<Guard0x38b25d0>) [p0, i105, p3, p10, p12, p14, p16, p18, p20, p22, p24, p26, p28, p30, p32, None, p79, p48, p56, i36]
i107 = int_ge(i102, 0)
guard_true(i107, descr=<Guard0x38b2590>) [p0, p85, p48, i102, p3, p10, p12, p14, p16, p18, p20, p22, p24, p26, p28, p30, p32, i105, p77, None, None, None, p56, i36]
i108 = int_lt(i102, i101)
guard_true(i108, descr=<Guard0x38b2550>) [p0, p85, p48, i102, p3, p10, p12, p14, p16, p18, p20, p22, p24, p26, p28, p30, p32, i105, p77, None, None, None, p56, i36]
i109 = getfield_gc(p99, descr=<FieldS spyvm.fieldtypes.DenseSmallIntegerStorage.inst__to 12>)
i110 = int_eq(i102, i109)
guard_true(i110, descr=<Guard0x38b2510>) [p0, p85, p48, i102, p99, p3, p10, p12, p14, p16, p18, p20, p22, p24, p26, p28, p30, p32, i105, p77, None, None, None, p56, i36]
i112 = int_add(i109, 1)
setarrayitem_gc(p100, i102, i51, descr=<ArrayS 4>)
cond_call(i44, 17954464, p37, descr=<Callv 0 r EF=2 OS=121>)
i115 = int_add(i51, 1)
cond_call(i44, 17954464, p37, descr=<Callv 0 r EF=2 OS=121>)
i117 = getfield_gc(ConstPtr(ptr61), descr=<FieldS spyvm.interpreter.Interpreter.inst_interrupt_check_counter 24>)
i119 = int_sub(i117, 9)
setfield_gc(ConstPtr(ptr61), i64, descr=<FieldS spyvm.interpreter.Interpreter.inst_remaining_stack_depth 40>)
setfield_gc(p99, i112, descr=<FieldS spyvm.fieldtypes.DenseSmallIntegerStorage.inst__to 12>)
setfield_gc(ConstPtr(ptr61), i119, descr=<FieldS spyvm.interpreter.Interpreter.inst_interrupt_check_counter 24>)
i121 = int_le(i119, 0)
guard_false(i121, descr=<Guard0x38b24d0>) [p0, p3, p10, p12, p14, p16, p18, p20, p22, p24, p26, p28, p30, p32, p46, i115, i105, p77, None, None, None, None, None]
p123 = new_with_vtable(ConstClass(W_SmallInteger))
setfield_gc(p123, i105, descr=<FieldS spyvm.model.W_SmallInteger.inst_value 8>)
setarrayitem_gc(p77, 2, p123, descr=<ArrayP 4>)
p126 = new_with_vtable(ConstClass(W_SmallInteger))
setfield_gc(p126, i115, descr=<FieldS spyvm.model.W_SmallInteger.inst_value 8>)
setarrayitem_gc(p46, 1, p126, descr=<ArrayP 4>)








jump (p0, p3, p10, p12, p14, p16, p18, p20, p22, p24, p26, p28, p30, p32, i36, i44, p37, p150, p77, i72, p56, i147, i64, p46, p80, descr=TargetToken(59397936))
label(p0, p3, p10, p12, p14, p16, p18, p20, p22, p24, p26, p28, p30, p32, i36, i44, p37, p126, p77, i72, p56, i119, i64, p46, p80, descr=TargetToken(59397936))

# What is this invalidation guard?    
guard_not_invalidated(descr=<Guard0x38cf010>) [p0, i36, p3, p10, p12, p14, p16, p18, p20, p22, p24, p26, p28, p30, p32]

# This is ok, at least the Integer object is not fetched from the temporary-array.
i128 = getfield_gc_pure(p126, descr=<FieldS spyvm.model.W_SmallInteger.inst_value 8>)

# Instead of fetching these - just fetch version once??
p130 = getarrayitem_gc(p77, 2, descr=<ArrayP 4>)
p131 = getarrayitem_gc(p77, 0, descr=<ArrayP 4>)

# The class, st-class, shadow, storage, strategy should be constant within the same version??
guard_class(p131, 19307816, descr=<Guard0x38f0e90>) [p0, i36, p131, p3, p10, p12, p14, p16, p18, p20, p22, p24, p26, p28, p30, p32, p130, p126, p56]
p132 = getfield_gc(p131, descr=<FieldP spyvm.model.W_AbstractObjectWithClassReference.inst_s_class 12>)
guard_value(p132, ConstPtr(ptr95), descr=<Guard0x3919110>) [p0, p131, p132, p3, p10, p12, p14, p16, p18, p20, p22, p24, p26, p28, p30, p32, i36, p130, p126, p56]
p133 = getfield_gc(p131, descr=<FieldP spyvm.model.W_AbstractPointersObject.inst_shadow 20>)
guard_isnull(p133, descr=<Guard0x39190d0>) [p0, p131, p133, p3, p10, p12, p14, p16, p18, p20, p22, p24, p26, p28, p30, p32, i36, p130, p126, p56]
p134 = getfield_gc(p131, descr=<FieldP spyvm.model.W_PointersObject.inst_strategy 32>)
guard_class(p134, 19328376, descr=<Guard0x3919090>) [p0, p131, p134, p3, p10, p12, p14, p16, p18, p20, p22, p24, p26, p28, p30, p32, i36, p130, p126, p56]
p135 = getfield_gc(p131, descr=<FieldP spyvm.model.W_PointersObject.inst__storage 28>)

# arr & len(arr) should be constant...
p136 = getfield_gc_pure(p135, descr=<FieldP spyvm.fieldtypes.DenseSmallIntegerStorage.inst_arr 16>)
i137 = arraylen_gc(p136, descr=<ArrayS 4>)

# This is ok... bit weird, but cannot change the squeak code.
i138 = getfield_gc_pure(p130, descr=<FieldS spyvm.model.W_SmallInteger.inst_value 8>)
i139 = int_eq(i138, i137)
guard_false(i139, descr=<Guard0x3919050>) [p0, p3, p10, p12, p14, p16, p18, p20, p22, p24, p26, p28, p30, p32, i137, i36, p130, p126, p56]
i140 = int_add_ovf(i138, 1)
guard_no_overflow(descr=<Guard0x3919010>) [p0, i140, p3, p10, p12, p14, p16, p18, p20, p22, p24, p26, p28, p30, p32, None, i36, p130, p126, p56]
i141 = int_ge(i138, 0)
guard_true(i141, descr=<Guard0x38f0f90>) [p0, p131, p126, i138, p3, p10, p12, p14, p16, p18, p20, p22, p24, p26, p28, p30, p32, i140, p77, None, i36, None, None, p56]
i142 = int_lt(i138, i137)
guard_true(i142, descr=<Guard0x38f0f50>) [p0, p131, p126, i138, p3, p10, p12, p14, p16, p18, p20, p22, p24, p26, p28, p30, p32, i140, p77, None, i36, None, None, p56]

# This is a duplicate of above check...
i143 = getfield_gc(p135, descr=<FieldS spyvm.fieldtypes.DenseSmallIntegerStorage.inst__to 12>)
i144 = int_eq(i138, i143)
guard_true(i144, descr=<Guard0x38f0f10>) [p0, p131, p126, i138, p135, p3, p10, p12, p14, p16, p18, p20, p22, p24, p26, p28, p30, p32, i140, p77, None, i36, None, None, p56]
i145 = int_add(i143, 1)

# This is the actual store
setarrayitem_gc(p136, i138, i128, descr=<ArrayS 4>)

# This is part of the storage algorithm, ok.
i146 = int_add(i128, 1)
setfield_gc(p135, i145, descr=<FieldS spyvm.fieldtypes.DenseSmallIntegerStorage.inst__to 12>)

# This is bullshit, allocations should be removed.

# First allocation: new length field of the OrderedCollection.
p149 = new_with_vtable(ConstClass(W_SmallInteger))
setfield_gc(p149, i140, descr=<FieldS spyvm.model.W_SmallInteger.inst_value 8>)
setarrayitem_gc(p77, 2, p149, descr=<ArrayP 4>)

# Second allocation: The temporary loop counter variable.
p150 = new_with_vtable(ConstClass(W_SmallInteger))
setfield_gc(p150, i146, descr=<FieldS spyvm.model.W_SmallInteger.inst_value 8>)
setarrayitem_gc(p46, 1, p150, descr=<ArrayP 4>)

# What is this???
i151 = arraylen_gc(p46, descr=<ArrayP 4>)
i152 = arraylen_gc(p77, descr=<ArrayP 4>)
i153 = arraylen_gc(p80, descr=<ArrayP 4>)

jump(p0, p3, p10, p12, p14, p16, p18, p20, p22, p24, p26, p28, p30, p32, i36, i44, p37, p150, p77, i72, p56, i147, i64, p46, p80, descr=TargetToken(59397936))













--end of the loop--
[36c45a6ea] jit-log-opt-loop}
[36c467091] {jit-log-opt-bridge
# bridge out of Guard 0x38f0ed0 with 74 ops
[p0, p1, p2, p3, p4, p5, p6, p7, p8, p9, p10, p11, p12, p13, p14, i15, i16, p17]
f19 = call(ConstClass(ll_time.ll_time_time), descr=<Callf 8 EF=4>)
setfield_gc(ConstPtr(ptr20), 10000, descr=<FieldS spyvm.interpreter.Interpreter.inst_interrupt_check_counter 24>)
guard_no_exception(descr=<Guard0x32b6050>) [p0, f19, p1, p2, p3, p4, p5, p6, p7, p8, p9, p10, p11, p12, p13, p14, i16, i15, p17]
f23 = float_sub(f19, 1394728411.377000)
f25 = float_mul(f23, 1000.000000)
i26 = cast_float_to_int(f25)
i28 = int_and(i26, 2147483647)
i29 = getfield_gc(ConstPtr(ptr20), descr=<FieldS spyvm.interpreter.Interpreter.inst_next_wakeup_tick 36>)
i30 = int_is_zero(i29)
guard_true(i30, descr=<Guard0x32b6d50>) [p0, i28, p1, p2, p3, p4, p5, p6, p7, p8, p9, p10, p11, p12, p13, p14, i16, i15, p17]
