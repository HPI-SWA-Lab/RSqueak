'From Squeak4.4 of 28 April 2013 [latest update: #12627] on 20 January 2014 at 11:01:42 am'!Object subclass: #STMFuture	instanceVariableNames: 'block process result'	classVariableNames: ''	poolDictionaries: ''	category: 'Kernel-STM'!!STMFuture methodsFor: 'accessing' stamp: 'toma 1/16/2014 23:33'!block	^ block! !!STMFuture methodsFor: 'accessing' stamp: 'toma 1/16/2014 23:33'!block: anObject	block := anObject! !!STMFuture methodsFor: 'accessing' stamp: 'toma 1/16/2014 23:34'!process	^ process! !!STMFuture methodsFor: 'accessing' stamp: 'toma 1/16/2014 23:34'!process: anObject	process := anObject! !!STMFuture methodsFor: 'accessing' stamp: 'toma 1/16/2014 23:35'!result	^ result! !!STMFuture methodsFor: 'accessing' stamp: 'toma 1/16/2014 23:35'!result: anObject	result := anObject! !!STMFuture methodsFor: 'as yet unclassified' stamp: 'toma 1/17/2014 00:23'!invoke	self process ifNil: [		self process: ([self result: self block value] parallelFork)	] ifNotNil: [		self error: 'Future already invoked'	]! !!STMFuture methodsFor: 'as yet unclassified' stamp: 'toma 1/17/2014 00:26'!value		self process ifNotNil: [		self wait.		^self result	] ifNil: [		self error: 'Future not invoked'	]	! !!STMFuture methodsFor: 'as yet unclassified' stamp: 'toma 1/17/2014 00:26'!wait		self process wait.! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!STMFuture class	instanceVariableNames: ''!!STMFuture class methodsFor: 'as yet unclassified' stamp: 'toma 1/16/2014 23:37'!invoke: aBlock		^(STMFuture new)		block: aBlock;		invoke;		yourself! !